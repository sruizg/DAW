<html>
    <head>
        <title> Actividad 1.4.2 </title>
        <style>
            body {
                background-color: aliceblue;
            }
            #tot {
                border: 2;
                border-radius: inherit;
                border-color: darkgray;
                border-style: solid;
                padding: 10px;
            }
            #cabecera {
                text-align: center;
            }
            ul, li {
                font-weight: bold;
            }
            p {
                font-weight: normal;
            }
        </style>
    </head>
    <body>
        <script>
            function principal()
            {
                console.log("Llamo a segunda() desde principal()");
                segunda();
                console.log("Acabo de llamar a segunda desde principal()");
            }
            function primera ()
            {
                //Random de 1 a 2
                var num = Math.floor((Math.random() * 2) + 1);
                console.log("Llamo a segunda() o tercera() desde primera");
                if (num === 1)
                    {
                        segunda();
                        console.log("Acabo de llamar a segunda() desde primera()");
                    }
                else
                    {
                        tercera();
                        console.log("Acabo de llamar a tercera() desde primera()");
                    }
            }
            function segunda ()
            {
                console.log("   Empieza la ejecución de segunda()");
                if (contador === 1) 
                    {
                        console.log("   *Preparo el lanzamiento de cuarta()");
                        //Contador a 0 para que no se ejecute si no entra por asincrona()
                        contador = 0;
                        setTimeout(function()
                        {
                            console.log("Pasan 5 segundos y");
                            cuarta();
                        }, 5000);
                    }
                console.log("   Entro al bucle llarg()");
                console.log("   Surto del bucle llarg()");
                console.log("   Acaba la ejecución de segunda()");
            }
            function tercera ()
            {
                console.log("   Empieza la ejecución de tercera()");
                console.log("   Entro al bucle llarg()");
                console.log("   Surto del bucle llarg()");
                console.log("   Acaba la ejecución de tercera()");
            }
            function cuarta ()
            {
                console.log("Empieza la ejecución de cuarta()");
                console.log("    Se muestra el alert");
                alert("Han pasado 5 sec.");
                console.log("Acaba la ejecución de cuarta()");
            }
            function clasica()
            {
                console.log("Empieza la ejecición de clasica()");
                console.log("Llamo a segunda() desde clasica()");
                segunda();
                console.log("Acabo de llamar a segunda desde clasica()");
                console.log("Llamo a tercera() desde clasica()");
                tercera();
                console.log("Acabo de llamar a tercera desde clasica()");
                console.log("Acaba la ejecición de clasica()");
            }
            function ambCallback(funcioAexecutar)
            {
                console.log("Empieza la ejecución de ambCallback()");
                funcioAexecutar();
                console.log("Acaba la ejecución de ambCallback()");
            }
            var contador = 0;
            function asincrona(funcioAexecutar)
            {
                contador = 1;
                console.log("Empieza la ejecución de asincrona()");
                funcioAexecutar();
                console.log("Acaba la ejecución de asincrona()");
            }
        </script>
        <div id="tot">
            <div id="cabecera">
                <h1>Activitat 1.4.2</h1>
                <button onclick="clasica()">Clasica</button>
                <button onclick="ambCallback(primera)">ambCallback</button>
                <button onclick="asincrona(principal)">Asincrona</button>
                <h5>*S'ha d'observar el log</h5>
            </div>
            <hr>
            <h3> Conclusions:</h3>
            <h4>La pàgina web ha d'incloure un apartat de conclusions i reflexions.
                Aquí teniu algunes preguntes que us podeu fer:</h4>
            <ul type= square>
                <li>Idees
                    <ul>
                        <li>Com ha anat?
                            <p>Bé, els dos primers sense cap problema i el tercer m'ha costat entendre com fer-ho però finalment ha sortit</p>
                        <li>S'ha comportat el programa com esperàves? Sí/No? 
                            <p>Sí, es molt diferent a la programació en Java però ho estem estudiant.</p>
                        <li>Reflexiona sobre quins avantatges o aplicació pràtica podem trobar per les funcions amb callback.
                            <p>Doncs l'avantatge més potent que l'hi veig es que es pot decidir/modificar el codi que s'executará mitjançant crides callback, fent que amb condicions, s'executin unes funcions o altres</p>
                    </ul>
                <li>Proves opcionals
                    <ul>
                        <li>Puc cridar a dues funcions callback dins d'una altra funció?
                            <p>Sí funcio(call1,call2)</p>
                        <li>Puc cridar a una funció callback amb paràmetres?
                            <p>Sí,</br>
                            function prueba (param1, param2) {</br>
                                alert(param1 + " y " + param2);</br>
                            }</br>
                            function callbackTest (callback) {</br>
                                callback (arguments[1], arguments[2]);</br>
                            }</br>
                            callbackTest (prueba, "Hola", "Adios");
                            </p>
                        <li>Mentre s’executa una funció callback amb molt pes de treball, es poden fer altres coses amb la pàgina web? (pots fer un bucle infinit per simular una funció amb molta càrrega de treball)
                        <li>Mentre s’executa una funció assíncrona amb molt pes de treball, es poden fer altres coses amb la pàgina web? (pots fer un bucle infinit per simular una funció amb molta càrrega de treball)
                        <li>Mentre s’executa una funció clàssica amb molt pes de treball, es poden fer altres coses amb la pàgina web? (pots fer un bucle infinit per simular una funció amb molta càrrega de treball)
                    </ul>
            </ul>
        </div>
    </body>
</html>
